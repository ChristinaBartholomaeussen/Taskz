<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="projectPopUp.css">
	<link rel="stylesheet" href="styles.css">
	<title>Project Page</title>
</head>
<body>

	<!-- Header fragment -->
	<div th:replace="Fragments/header :: header"></div>

	<div class="wrapper container">
		<main class="my-5">

			<!--#region Popups-->
			<div class="" th:classappend="${popup} ? display : none">
				<a href="/projects" class="background">
				</a>
				<div class="popup relative">
					<div class="float-right cross-container">
						<a href="/projects">
							<span class="cross cross-one"></span>
							<span class="cross cross-two"></span>
						</a>
					</div>

					<form th:method="post" action="/postNewProject">
						<div class="form-group" th:classappend="${deadlineIsAfterStartDate} ? display : none">
							<span class="display-block bg-dark mx-auto col-md-12 p-3 text-white">Deadline can't be before start date</span>

						</div>
							<div class="form-row">
								<div class="form-group col-md-12">
									<label for="inputFormProjectName">Project Name</label>
									<input type="text" class="form-control" id="inputFormProjectName" name="projectName" placeholder="Enter Project Name" required>
								</div>
							</div>	
							<div class="form-row">
								<div class="form-group col-md-6">
									<label for="startDateProjectForm">Start Date:</label>
									<input type="date" class="form-control" id="startDateProjectForm" name="projectStartDate" placeholder="Choose start date" th:attr="min=${date}" required>
								</div>
								<div class="form-group col-md-6">
									<label for="deadlineProjectForm">Deadline:</label>
									<input type="date" class="form-control" id="deadlineProjectForm" name="projectDeadline" placeholder="Choose deadline" th:attr="min=${date}" required>
								</div>
							</div>	
							<button type="submit" class="btn btn-primary mx-auto">Create Project</button>
						<a href="/projects" class="btn btn-danger mx-auto">Cancel</a>
					</form>
					</div>
				</div>
			<!--#endregion-->

			<!--#region Main table-->
			<table class="table table-striped">
				<thead>
					<th class="text-center">Project Name</th>
					<th class="text-center">Startdate</th>
					<th class="text-center">Deadline</th>
					<th class="text-center">Work Hours Per Day</th>
					<th class="text-center">Total Estimated Time</th>
					<th></th>
					<th></th>
				</thead>
				<tbody>
					<tr th:each="project : ${projectList}">
						<td th:text="${project.getName}"/>
						<td class="text-center" th:text="${project.getStartDate}"/>
						<td class="text-center" th:text="${project.getDeadline}"/>
						<td class="text-center" th:text="${project.getTotalWorkHoursPerDay}"/>
						<td class="text-center" th:text="${project.getTotalEstimatedTime}"/>
						<td><form method="post" action="/deleteProject"><button type="submit" name="projectId" th:value="${project.getProjectId}" class="btn btn-danger">Delete</button></form></td>
						<td><form method="post" action="/postSubprojects"><button type="submit" name="projectId" th:value="${project.getProjectId}" class="btn btn-primary">See Project</button></form></td>
					</tr>
				</tbody>
			</table>
			<a href="/newProject" class="btn btn-success">New Project</a>
			<!--#endregion-->
		</main>
	</div>
</body>
</html>
